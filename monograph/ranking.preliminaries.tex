Em termos gerais, \emph{ranking} pode ser enunciado como a tarefa de
ordenar os elementos de um conjunto de acordo com algum critério. Alguns
exemplos de \emph{rankings} são: \emph{ranking} de seleções da FIFA,
\emph{ranking} das melhores aplicações do Rails Rumble e ranking do IDH
(Índice de Desenvolvimento Humano) dos países.

Todos os exemplos citados acima tem um aspecto comum: a comparação entre os
elementos do ranking é feita sobre uma pontuação de cada elemento. Essa
pontuação é obtida a partir de algumas características dos elementos, da mesma
forma, o problema a ser estudado consiste em ordenar elementos de acordo com
uma pontuação.

Em uma definição que carece de formalidade, pode-se descrever o problema como
a busca pela ordenação dos elementos de um conjunto. A ordem é regida por uma
pontuação obtida por cada elemento, assim podemos reduzir o problema à
determinação da pontuação para todos os elementos do conjunto.

Cada instância possui uma característica binária \emph{C} em comum, isso
significa que \emph{C} pode assumir um de dois valores possíveis para uma dada
instância. Fixando um valor \emph{V} para a característica \emph{C} como base,
podemos dizer, de forma simplória, que a pontuação dessa instância é a
probabilidade de \emph{C} possuir o valor \emph{V}.

\section{Formalização do problema}
Algumas definições são necessárias para adicionar formalidade à descrição do
problema dada acima. Começando pelo conceito de \emph{ranking}, o conjunto a
ser ordenado é chamado de base. Os elementos do conjunto a serem ordenados são
denominados instâncias. As características dos elementos a que nos referimos
são chamadas de atributos das instâncias. Dentre os atributos, um é nomeado
classe, encarregado da ordenação no \emph{ranking}, além disso, para nosso
problema, o atributo classe deve ter um domínio binário $\{0, 1\}$.

Tendo como entrada uma base composta por instâncias para as quais os valores
das classes são desconhecidos, espera-se como saída uma ordenação de tais
instâncias que siga o critério: as instâncias com maior chance de pertencer à
classe $0$ devem preceder as com maior chance de pertencer à classe $1$. Isso
deve ser concluído com base apenas nos atributos das instâncias.

A via para definir uma solução passa pelo aprendizado de máquina. O algoritmo
projetado funciona em duas etapas. Na primeira, denominada treinamento, recebe
uma base com instâncias compostas por atributos e classe e tenta extrair algum
conhecimento dessas. Na segunda etapa, o algoritmo recebe uma base com
instâncias compostas apenas por atributos e deve usar o conhecimento obtido na
primeira etapa para ordenar tais instâncias.

Uma medida comum de sucesso para algoritmos de \emph{ranking} é a área sobre a
curva \emph{ROC (Receiver Operating Characteristic)}, comumente chamada de
\emph{AUC (Area Under the Curve)}. A perda, $1 - AUC$, associada a essa medida
é calculada pelo número de instâncias, normalizado pela quantidade de $0$s
vezes a quantidade de $1$s, que necessitam ser trocadas para um \emph{ranking}
perfeito. Uma ordenação é perfeita, quando todas as instâncias com classe $0$
precedem as com classe $1$, nesse caso a perda na \emph{AUC} é $0$. No pior
caso, em que todos os $1$s precedem os $0$s, a perda na \emph{AUC} é $1$.

O uso da classe como critério para ordenação sugere uma relação com os problemas
de classificação e regressão em aprendizagem de máquina. Realmente, pode-se
derivar uma ordenação diretamente das pontuações obtidas em uma classificação ou
regressão. Se desejamos que instâncias da classe $0$ ocupem as primeiras
posições do \emph{ranking}, basta ordenar de forma crescente as pontuações
obtidas considerando a classe $0$.

Geralmente, a medida de eficiência mais utilizada para classificação é a
acurácia: uma razão entre o número de instâncias corretamente classificadas
sobre o número total de instâncias no conjunto de avaliação. O erro decorrente
de uma classificação afeta a acurácia de uma forma pontual.

Comparativamente, um erro de classificação pode ter maior influência na medida
\emph{AUC} que na acurácia, portanto afetar consideravelmente um \emph{ranking}.
A causa disso é a \emph{AUC} considerar uma relação entre as instâncias,
enquanto a acurácia considera apenas as instâncias pontualmente. Abaixo
ilustramos através de um exemplo uma relação entre essas medidas que comprova o
intuído sobre erros na classificação.

\begin{table}[h!]
        \centering
        \begin{tabular*}{0.50\textwidth}{@{\extracolsep{\fill}} c|rr}
        \hline
        atributos & classe & previsão \\
        \hline
        $a_{0, 1}, \quad \cdots, \quad a_{0, n}$ & 0 & 0 \\
        $a_{1, 1}, \quad \cdots, \quad a_{1, n}$ & 0 & 0 \\
        $a_{2, 1}, \quad \cdots, \quad a_{2, n}$ & 1 & 0 \\
        $a_{3, 1}, \quad \cdots, \quad a_{3, n}$ & 0 & 0 \\
        $a_{4, 1}, \quad \cdots, \quad a_{4, n}$ & 0 & 0 \\
        $a_{5, 1}, \quad \cdots, \quad a_{5, n}$ & 0 & 0 \\
        $a_{6, 1}, \quad \cdots, \quad a_{6, n}$ & 0 & 0 \\
        $a_{7, 1}, \quad \cdots, \quad a_{7, n}$ & 0 & 0 \\
        $a_{8, 1}, \quad \cdots, \quad a_{8, n}$ & 0 & 0 \\
        $a_{9, 1}, \quad \cdots, \quad a_{9, n}$ & 1 & 1 \\
        \hline
        \end{tabular*}

        \caption{Exemplo de \emph{ranking} e classificação}
\end{table}

No conjunto hipotético representado ao lado, temos dez instâncias ordenadas em
um \emph{ranking} com os atributos, as classes e as previsões dadas por um
classificador. Podemos perceber que o classificador errou apenas a classe da
terceira instância.

Calculando a acurácia, temos nove acertos em dez possíveis, ou seja, $90\%$.
Calculando a perda da AUC considerando como base a classe $0$, a terceira
instância precisa retroceder seis posições para uma ordenação perfeita,
normalizando pelo número de $0$s vezes o número de $1$s, temos
$(1 - AUC) = 6 \div (2 * 8) = 0,325$, logo a AUC vale $62,5\%$. Isso comprova
que a AUC, comparada à acurácia, pode sofrer um impacto maior devido a erros de
classificação.

Langford explica que um classificador que gere um erro de ordem $\alpha$ na
acurácia pode gerar um erro teórico máximo de $\alpha \cdot n$ na AUC, onde $n$
é a cardinalidade do conjunto de instâncias avaliado. Esse efeito se intensifica
a medida que aumenta o desbalanceamento de classes do conjunto usado durante o
processo de treinamento pois, quanto mais desbalanceadas as classes, mais
provável que o classificador resultante seja tendencioso para a classe
majoritária.

\section{Formulação Matemática}

A formulação matemática a seguir tem como objetivo possibilitar a descrição do
algoritmo de \emph{Ranking} proposto em {{Langford}}.

\newtheorem{Base}{Definition}
\begin{Base}
Uma base B é composta por um espaço de $n$ atributos $A \in {a_0, ..., a_n}$
\end{Base}
